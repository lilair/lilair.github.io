<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="1 MyBatis简介1.1 MyBatis​    MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis，实质上Mybatis对ibatis进行一些改进。  ​    MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis框架学习（一）">
<meta property="og:url" content="http://yoursite.com/2019/08/26/mybatis框架学习（一）/index.html">
<meta property="og:site_name" content="学海无涯，惟勤是岸。">
<meta property="og:description" content="1 MyBatis简介1.1 MyBatis​    MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis，实质上Mybatis对ibatis进行一些改进。  ​    MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2019/08/26/mybatis框架学习（一）/1566877973118.png">
<meta property="og:updated_time" content="2019-08-27T07:09:43.846Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mybatis框架学习（一）">
<meta name="twitter:description" content="1 MyBatis简介1.1 MyBatis​    MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis，实质上Mybatis对ibatis进行一些改进。  ​    MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需">
<meta name="twitter:image" content="http://yoursite.com/2019/08/26/mybatis框架学习（一）/1566877973118.png">
  <link rel="canonical" href="http://yoursite.com/2019/08/26/mybatis框架学习（一）/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>mybatis框架学习（一） | 学海无涯，惟勤是岸。</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">学海无涯，惟勤是岸。</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">认真生活，快乐工作。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">9</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">0</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">23</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/26/mybatis框架学习（一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吒儿">
      <meta itemprop="description" content="去他个鸟命!我命由我,不由天!是魔是仙,我自己决定!">
      <meta itemprop="image" content="/images/nezha.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学海无涯，惟勤是岸。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">mybatis框架学习（一）

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-26 23:30:25" itemprop="dateCreated datePublished" datetime="2019-08-26T23:30:25+08:00">2019-08-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-08-27 15:09:43" itemprop="dateModified" datetime="2019-08-27T15:09:43+08:00">2019-08-27</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-MyBatis简介"><a href="#1-MyBatis简介" class="headerlink" title="1 MyBatis简介"></a>1 MyBatis简介</h1><h2 id="1-1-MyBatis"><a href="#1-1-MyBatis" class="headerlink" title="1.1 MyBatis"></a>1.1 MyBatis</h2><p>​    MyBatis 本是<a href="http://baike.baidu.com/view/28283.htm" target="_blank" rel="noopener">apache</a>的一个开源项目<a href="http://baike.baidu.com/view/628102.htm" target="_blank" rel="noopener">iBatis</a>, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis，实质上Mybatis对ibatis进行一些改进。 </p>
<p>​    MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需要关注 SQL 本身，而不需要花费精力去处理例如注册驱动、创建connection、创建statement、手动设置参数、结果集检索等jdbc繁杂的过程代码。</p>
<p>​    对jdbc的封装框架有哪些：Hibernate,dbutils,jdbcTemplate[spring]，mybatis</p>
<p>​    原理：Mybatis通过<strong>xml或注解</strong>的方式将要执行的各种statement（statement、preparedStatemnt、CallableStatement）配置起来，并通过java对象和statement中的sql进行映射生成最终执行的sql语句，最后由mybatis框架执行sql并将结果映射成java对象并返回。</p>
<h2 id="1-2-jdbc程序代码"><a href="#1-2-jdbc程序代码" class="headerlink" title="1.2 jdbc程序代码"></a>1.2 jdbc程序代码</h2><p> <img src="/2019/08/26/mybatis框架学习（一）/1566877973118.png" alt="1566877973118"></p>
<p><strong>存在的问题</strong></p>
<p>1、数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库链接池可解决此问题。 </p>
<p>2、Sql 语句在代码中硬编码，造成代码不易维护，实际应用 sql 变化的可能较大，sql 变动需要改变 java </p>
<p>代码。 </p>
<p>3、使用 preparedStatement 向占有位符号传参数存在硬编码，因为 sql 语句的 where 条件不一定，可能 </p>
<p>多也可能少，修改 sql 还要修改代码，系统不易维护。 </p>
<p>4、对结果集解析存在硬编码（查询列名），sql 变化导致解析代码变化，系统不易维护，如果能将数据库记 </p>
<p>录封装成 pojo 对象解析比较方便。 </p>
<h1 id="2-Mybatis-框架快速入门"><a href="#2-Mybatis-框架快速入门" class="headerlink" title="2 Mybatis 框架快速入门"></a>2 <strong>Mybatis</strong> 框架快速入门</h1><h2 id="2-1-Mybatis-框架开发的准备"><a href="#2-1-Mybatis-框架开发的准备" class="headerlink" title="2.1 Mybatis 框架开发的准备"></a><strong>2.1 Mybatis</strong> <strong>框架开发的准备</strong></h2><h3 id="2-1-1-官网下载-Mybatis-框架"><a href="#2-1-1-官网下载-Mybatis-框架" class="headerlink" title="2.1.1 官网下载 Mybatis 框架"></a><strong>2.1.1</strong> <strong>官网下载</strong> <strong>Mybatis</strong> <strong>框架</strong></h3><p>从百度中“mybatis download”可以下载最新的 Mybatis 开发包。 </p>
<p>进入选择语言的界面，进入中文版本的开发文档。</p>
<h2 id="2-2-搭建-Mybatis-开发环境"><a href="#2-2-搭建-Mybatis-开发环境" class="headerlink" title="2.2 搭建 Mybatis 开发环境"></a>2.2 <strong>搭建</strong> <strong>Mybatis</strong> <strong>开发环境</strong></h2><h3 id="2-2-1创建maven工程"><a href="#2-2-1创建maven工程" class="headerlink" title="2.2.1创建maven工程"></a>2.2.1创建maven工程</h3><p>创建 mybatis01 的工程，工程信息如下： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Groupid:com.itheima </span><br><span class="line"></span><br><span class="line">ArtifactId:mybatis01 </span><br><span class="line"></span><br><span class="line">Packing:jar</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2添加Mybatis-的坐标"><a href="#2-2-2添加Mybatis-的坐标" class="headerlink" title="2.2.2添加Mybatis 的坐标"></a>2.2.2添加Mybatis 的坐标</h3><p>在 pom.xml 文件中添加 Mybatis3.4.5 的坐标，如下： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt; dependencies&gt; </span><br><span class="line"></span><br><span class="line">&lt; dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; groupId&gt;org.mybatis&lt; /groupId&gt; </span><br><span class="line"></span><br><span class="line">&lt; artifactId&gt;mybatis&lt; /artifactId&gt; </span><br><span class="line"></span><br><span class="line">&lt; version&gt;<span class="number">3.4</span>.5&lt; /version&gt; </span><br><span class="line"></span><br><span class="line">&lt; /dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; groupId&gt;junit&lt; /groupId&gt; </span><br><span class="line"></span><br><span class="line">&lt; artifactId&gt;junit&lt; /artifactId&gt; </span><br><span class="line"></span><br><span class="line">&lt; version&gt;<span class="number">4.10</span>&lt; /version&gt; </span><br><span class="line"></span><br><span class="line">&lt; scope&gt;test&lt; /scope&gt; </span><br><span class="line"></span><br><span class="line">&lt; /dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; groupId&gt;mysql&lt; /groupId&gt; </span><br><span class="line"></span><br><span class="line">&lt; artifactId&gt;mysql-connector-java&lt; /artifactId&gt; </span><br><span class="line"></span><br><span class="line">&lt; version&gt;<span class="number">5.1</span>.6&lt; /version&gt; </span><br><span class="line"></span><br><span class="line">&lt; scope&gt;runtime&lt; /scope&gt; </span><br><span class="line"></span><br><span class="line">&lt; /dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; groupId&gt;log4j&lt; /groupId&gt; </span><br><span class="line"></span><br><span class="line">&lt; artifactId&gt;log4j&lt; /artifactId&gt; </span><br><span class="line"></span><br><span class="line">&lt; version&gt;<span class="number">1.2</span>.12&lt; /version&gt; </span><br><span class="line"></span><br><span class="line">&lt; /dependency&gt; </span><br><span class="line"></span><br><span class="line">&lt; /dependencies&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-3-编写-User-实体类"><a href="#2-2-3-编写-User-实体类" class="headerlink" title="2.2.3 编写 User 实体类"></a><strong>2.2.3</strong> <strong>编写</strong> <strong>User</strong> <strong>实体类</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span>** <span class="title">User</span> **<span class="keyword">implements</span>** <span class="title">Serializable</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** Integer id; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** String username; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** Date birthday; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** String sex; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** String address;</span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">Integer <span class="title">getId</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** id; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** setId(Integer id) &#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">this</span>**.id = id; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">String <span class="title">getUsername</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** username; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** setUsername(String username) &#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">this</span>**.username = username; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">Date <span class="title">getBirthday</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** birthday; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** setBirthday(Date birthday) &#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">this</span>**.birthday = birthday; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">String <span class="title">getSex</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** sex; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** setSex(String sex) &#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">this</span>**.sex = sex; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">String <span class="title">getAddress</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** address; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** setAddress(String address) &#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">this</span>**.address = address; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span>** <span class="function">String <span class="title">toString</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">return</span>** <span class="string">"User [id="</span> + id + <span class="string">", username="</span> + username + <span class="string">", birthday="</span> + birthday </span><br><span class="line"></span><br><span class="line">\+ <span class="string">", sex="</span> + sex + <span class="string">", address="</span> </span><br><span class="line"></span><br><span class="line">\+ address + <span class="string">"]"</span>; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-4-编写持久层接口-IUserDao"><a href="#2-2-4-编写持久层接口-IUserDao" class="headerlink" title="2.2.4 编写持久层接口 IUserDao"></a><strong>2.2.4</strong> <strong>编写持久层接口</strong> <strong>IUserDao</strong></h3><p>IUserDao 接口就是我们的持久层接口（也可以写成 UserDao 或者 UserMapper）,具体代码如下： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">**<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span>** <span class="title">IUserDao</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 查询所有用户 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* **<span class="doctag">@return</span>** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line">List&lt; User&gt; findAll(); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-5-编写持久层接口的映射文件-IUserDao-xml"><a href="#2-2-5-编写持久层接口的映射文件-IUserDao-xml" class="headerlink" title="2.2.5 编写持久层接口的映射文件 IUserDao.xml"></a><strong>2.2.5</strong> <strong>编写持久层接口的映射文件</strong> <strong>IUserDao.xml</strong></h3><p>   <strong>创建位置：</strong>必须和持久层接口在相同的包中。 </p>
<p>   <strong>名称</strong>：必须以持久层接口名称命名文件名，扩展名是.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper </span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> </span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt; &lt;mapper namespace=<span class="string">"com.itheima.dao.IUserDao"</span>&gt;</span><br><span class="line">&lt;!-- 配置查询所有操作 --&gt; &lt;select id=<span class="string">"findAll"</span> resultType=<span class="string">"com.itheima.domain.User"</span>&gt;</span><br><span class="line">select * from user</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-6-编写-SqlMapConfig-xml-配置文件"><a href="#2-2-6-编写-SqlMapConfig-xml-配置文件" class="headerlink" title="2.2.6 编写 SqlMapConfig.xml 配置文件"></a><strong>2.2.6</strong> <strong>编写</strong> <strong>SqlMapConfig.xml</strong> <strong>配置文件</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration </span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Config 3.0//EN"</span> </span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt; &lt;configuration&gt;</span><br><span class="line">&lt;!-- 配置 mybatis 的环境 --&gt; &lt;environments <span class="keyword">default</span>=<span class="string">"mysql"</span>&gt;</span><br><span class="line">&lt;!-- 配置 mysql 的环境 --&gt; &lt;environment id=<span class="string">"mysql"</span>&gt;</span><br><span class="line">&lt;!-- 配置事务的类型 --&gt; &lt;transactionManager type="JDBC"&gt;&lt;/transactionManager&gt;</span><br><span class="line">&lt;!-- 配置连接数据库的信息：用的是数据源(连接池) --&gt; &lt;dataSource type=<span class="string">"POOLED"</span>&gt; &lt;property name=<span class="string">"driver"</span> value=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">"url"</span> value=<span class="string">"jdbc:mysql://localhost:3306/ee50"</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">"username"</span> value=<span class="string">"root"</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">"password"</span> value=<span class="string">"1234"</span>/&gt;</span><br><span class="line">&lt;/dataSource&gt;</span><br><span class="line">&lt;/environment&gt;</span><br><span class="line">&lt;/environments&gt;</span><br><span class="line">&lt;!-- 告知 mybatis 映射配置的位置 --&gt; &lt;mappers&gt; &lt;mapper resource=<span class="string">"com/itheima/dao/IUserDao.xml"</span>/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-7-编写测试类"><a href="#2-2-7-编写测试类" class="headerlink" title="2.2.7 编写测试类"></a><strong>2.2.7</strong> <strong>编写测试类</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="class"><span class="keyword">class</span>** <span class="title">MybatisTest</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>** main(String[] args)**<span class="keyword">throws</span>** Exception &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.读取配置文件 </span></span><br><span class="line"></span><br><span class="line">InputStream in = Resources.*getResourceAsStream*(<span class="string">"SqlMapConfig.xml"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//2.创建 SqlSessionFactory 的构建者对象 </span></span><br><span class="line"></span><br><span class="line">SqlSessionFactoryBuilder builder = **<span class="keyword">new</span>** SqlSessionFactoryBuilder(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//3.使用构建者创建工厂对象 SqlSessionFactory </span></span><br><span class="line"></span><br><span class="line">SqlSessionFactory factory = builder.build(in); </span><br><span class="line"></span><br><span class="line"><span class="comment">//4.使用 SqlSessionFactory 生产 SqlSession 对象 </span></span><br><span class="line"></span><br><span class="line">SqlSession session = factory.openSession(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//5.使用 SqlSession 创建 dao 接口的代理对象 </span></span><br><span class="line"></span><br><span class="line">IUserDao userDao = session.getMapper(IUserDao.**<span class="class"><span class="keyword">class</span>**)</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">//6.使用代理对象执行查询所有方法 </span></span><br><span class="line"></span><br><span class="line">List&lt; User&gt; users = userDao.findAll(); </span><br><span class="line"></span><br><span class="line">**<span class="keyword">for</span>**(User user : users) &#123; </span><br><span class="line"></span><br><span class="line">System.***out***.println(user); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//7.释放资源 </span></span><br><span class="line"></span><br><span class="line">session.close(); </span><br><span class="line"></span><br><span class="line">in.close(); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-小结"><a href="#2-3-小结" class="headerlink" title="2.3 小结"></a><strong>2.3</strong> <strong>小结</strong></h2><p>​    通过快速入门示例，我们发现使用 mybatis 是非常容易的一件事情，因为只需要编写 Dao 接口并且按照 </p>
<p>mybatis 要求编写两个配置文件，就可以实现功能。远比我们之前的 jdbc 方便多了。（我们使用注解之后，将变得 更为简单，只需要编写一个 mybatis 配置文件就够了。） </p>
<h1 id="3-基于代理-Dao-实现-CRUD-操作"><a href="#3-基于代理-Dao-实现-CRUD-操作" class="headerlink" title="3 基于代理 Dao 实现 CRUD 操作"></a><strong>3 基于代理</strong> <strong>Dao</strong> <strong>实现</strong> <strong>CRUD</strong> <strong>操作</strong></h1><p><strong>使用要求：</strong> </p>
<p>1、持久层接口和持久层接口的映射配置必须在相同的包下 </p>
<p>2、持久层映射配置中 mapper 标签的 namespace 属性取值必须是持久层接口的全限定类名 </p>
<p>3、SQL 语句的配置标签&lt; select&gt;,&lt; insert&gt;,&lt; delete&gt;,&lt; update&gt;的 id 属性必须和持久层接口的方法名相同。 </p>
<h2 id="3-1-根据-ID-查询"><a href="#3-1-根据-ID-查询" class="headerlink" title="3.1 根据 ID 查询"></a><strong>3.1</strong> <strong>根据</strong> <strong>ID</strong> <strong>查询</strong></h2><h3 id="3-1-1-在持久层接口中添加-findById-方法"><a href="#3-1-1-在持久层接口中添加-findById-方法" class="headerlink" title="3.1.1 在持久层接口中添加 findById 方法"></a><strong>3.1.1</strong> <strong>在持久层接口中添加</strong> <strong>findById</strong> <strong>方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-在用户的映射配置文件中配置"><a href="#3-1-2-在用户的映射配置文件中配置" class="headerlink" title="3.1.2 在用户的映射配置文件中配置"></a><strong>3.1.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 根据 id 查询 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;findById&quot; resultType=&quot;com.itheima.domain.User&quot; parameterType=&quot;int&quot;&gt; </span><br><span class="line"></span><br><span class="line">select * from user where id = #&#123;uid&#125; </span><br><span class="line"></span><br><span class="line">&lt; /select&gt;</span><br></pre></td></tr></table></figure>

<p><strong>细节：</strong> </p>
<p><strong>resultType</strong> <strong>属性：</strong> 用于指定结果集的类型。 </p>
<p><strong>parameterType</strong> <strong>属性</strong>：用于指定传入参数的类型。 </p>
<p><strong>sql</strong> <strong>语句中使用#{}字符</strong>：代表占位符，相当于原来 jdbc 部分所学的?，都是用于执行语句时替换实际的数据。 具体的数据是由#{}里面的内容决定的。 </p>
<p><strong>#{}中内容的写法</strong>：由于数据类型是基本类型，所以此处可以随意写。 </p>
<h3 id="3-1-3-在测试类添加测试"><a href="#3-1-3-在测试类添加测试" class="headerlink" title="3.1.3 在测试类添加测试"></a><strong>3.1.3</strong> <strong>在测试类添加测试</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">**<span class="keyword">public</span> <span class="class"><span class="keyword">class</span>** <span class="title">MybastisCRUDTest</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** InputStream in ; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** SqlSessionFactory factory; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** SqlSession session; </span><br><span class="line"></span><br><span class="line">**<span class="keyword">private</span>** IUserDao userDao; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testFindOne() &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//6.执行操作 </span></span><br><span class="line"></span><br><span class="line">User user = userDao.findById(<span class="number">41</span>); </span><br><span class="line"></span><br><span class="line">System.***out***.println(user); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Before</span><span class="comment">//在测试方法执行之前执行 </span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** init()**<span class="keyword">throws</span>** Exception &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//1.读取配置文件 </span></span><br><span class="line"></span><br><span class="line">in = Resources.*getResourceAsStream*(<span class="string">"SqlMapConfig.xml"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//2.创建构建者对象 </span></span><br><span class="line"></span><br><span class="line">SqlSessionFactoryBuilder builder = **<span class="keyword">new</span>** SqlSessionFactoryBuilder(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//3.创建 SqlSession 工厂对象 </span></span><br><span class="line"></span><br><span class="line">factory = builder.build(in); </span><br><span class="line"></span><br><span class="line"><span class="comment">//4.创建 SqlSession 对象 </span></span><br><span class="line"></span><br><span class="line">session = factory.openSession(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//5.创建 Dao 的代理对象 </span></span><br><span class="line"></span><br><span class="line">userDao = session.getMapper(IUserDao.class); </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After</span><span class="comment">//在测试方法执行完成之后执行 </span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** destroy() **<span class="keyword">throws</span>** Exception&#123; </span><br><span class="line"></span><br><span class="line">session.commit(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//7.释放资源 </span></span><br><span class="line"></span><br><span class="line">session.close(); </span><br><span class="line"></span><br><span class="line">in.close(); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-保存操作"><a href="#3-2-保存操作" class="headerlink" title="3.2 保存操作"></a><strong>3.2</strong> <strong>保存操作</strong></h2><h3 id="3-2-1-在持久层接口中添加新增方法"><a href="#3-2-1-在持久层接口中添加新增方法" class="headerlink" title="3.2.1 在持久层接口中添加新增方法"></a><strong>3.2.1</strong> <strong>在持久层接口中添加新增方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-在用户的映射配置文件中配置"><a href="#3-2-2-在用户的映射配置文件中配置" class="headerlink" title="3.2.2 在用户的映射配置文件中配置"></a><strong>3.2.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 保存用户--&gt; </span><br><span class="line"></span><br><span class="line">&lt;insert id=*<span class="string">"saveUser"</span>* parameterType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line"></span><br><span class="line"><span class="function">insert into <span class="title">user</span><span class="params">(username,birthday,sex,address)</span>  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">values</span><span class="params">(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;/insert&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>细节：</strong> </p>
<p><strong>parameterType 属性：</strong> </p>
<p>​        代表参数的类型，因为我们要传入的是一个类的对象，所以类型就写类的全名称。 </p>
<p><strong>sql 语句中使用#{}字符：</strong> </p>
<p>​        它代表占位符，相当于原来 jdbc 部分所学的?，都是用于执行语句时替换实际的数据。 </p>
<p>具体的数据是由#{}里面的内容决定的。 </p>
<p><strong>#{}中内容的写法:</strong></p>
<p>​        由于我们保存方法的参数是 一个 User 对象，此处要写 User 对象中的属性名称。 </p>
<p>它用的是 ognl 表达式。 </p>
<p><strong>ognl 表达式：</strong> </p>
<p>​        它是 apache 提供的一种表达式语言，全称是： </p>
<p>​        Object Graphic Navigation Language 对象图导航语言 </p>
<p>​        它是按照一定的语法格式来获取数据的。 语法格式就是使用 #{对象.对象}的方式#{user.username}它会先去找 user 对象，然后在 user 对象中找到 username 属性，并调用 getUsername()方法把值取出来。但是我们在 parameterType 属性上指定了实体类名称，所以可以省略 user. 而直接写 username。 </p>
<h3 id="3-2-3-添加测试类中的测试方法"><a href="#3-2-3-添加测试类中的测试方法" class="headerlink" title="3.2.3 添加测试类中的测试方法"></a><strong>3.2.3</strong> <strong>添加测试类中的测试方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testSave()&#123; </span><br><span class="line"></span><br><span class="line">User user = **<span class="keyword">new</span>** User(); </span><br><span class="line"></span><br><span class="line">user.setUsername(<span class="string">"modify User property"</span>); </span><br><span class="line"></span><br><span class="line">user.setAddress(<span class="string">"北京市顺义区"</span>); </span><br><span class="line"></span><br><span class="line">user.setSex(<span class="string">"男"</span>); </span><br><span class="line"></span><br><span class="line">user.setBirthday(**<span class="keyword">new</span>** Date()); </span><br><span class="line"></span><br><span class="line">System.***out***.println(<span class="string">"保存操作之前："</span>+user); </span><br><span class="line"></span><br><span class="line"><span class="comment">//5.执行保存方法 </span></span><br><span class="line"></span><br><span class="line">userDao.saveUser(user); </span><br><span class="line"></span><br><span class="line">System.***out***.println(<span class="string">"保存操作之后："</span>+user); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开 Mysql 数据库发现并没有添加任何记录，原因是什么？ </p>
<p>这一点和 jdbc 是一样的，<strong>我们在实现增删改时一定要去控制事务的提交</strong>，那么在 mybatis 中如何控制事务 </p>
<p>提交呢？ </p>
<p>可以使用:session.commit();来实现事务提交。加入事务提交后的代码如下： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@After</span><span class="comment">//在测试方法执行完成之后执行 </span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** destroy() **<span class="keyword">throws</span>** Exception&#123; </span><br><span class="line"></span><br><span class="line">**session.commit();** </span><br><span class="line"></span><br><span class="line"><span class="comment">//7.释放资源 </span></span><br><span class="line"></span><br><span class="line">session.close(); </span><br><span class="line"></span><br><span class="line">in.close(); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-4-问题扩展：新增用户-id-的返回值"><a href="#3-2-4-问题扩展：新增用户-id-的返回值" class="headerlink" title="3.2.4 问题扩展：新增用户 id 的返回值"></a><strong>3.2.4</strong> <strong>问题扩展：新增用户</strong> <strong>id</strong> <strong>的返回值</strong></h3><p>新增用户后，同时还要返回当前新增用户的 id 值，因为 id 是由数据库的自动增长来实现的，所以就相 </p>
<p>当于我们要在新增后将自动增长 auto_increment 的值返回。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id=*<span class="string">"saveUser"</span>* parameterType=*<span class="string">"USER"</span>*&gt; </span><br><span class="line"></span><br><span class="line">**&lt;!--** **配置保存时获取插入的** **id --&gt;** </span><br><span class="line"></span><br><span class="line">&lt;selectKey keyColumn=*<span class="string">"id"</span>* keyProperty=*<span class="string">"id"</span>* resultType=*<span class="string">"int"</span>*&gt; </span><br><span class="line"></span><br><span class="line"><span class="function">select <span class="title">last_insert_id</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line">&lt;/selectKey&gt; </span><br><span class="line"></span><br><span class="line"><span class="function">insert into <span class="title">user</span><span class="params">(username,birthday,sex,address)</span>  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">values</span><span class="params">(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;/insert&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-用户更新"><a href="#3-3-用户更新" class="headerlink" title="3.3 用户更新"></a><strong>3.3</strong> <strong>用户更新</strong></h2><h3 id="3-3-1-在持久层接口中添加更新方法"><a href="#3-3-1-在持久层接口中添加更新方法" class="headerlink" title="3.3.1 在持久层接口中添加更新方法"></a><strong>3.3.1</strong> <strong>在持久层接口中添加更新方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* 更新用户 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@param</span>** user </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@return</span>** 影响数据库记录的行数 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">int</span>** updateUser(User user);</span><br></pre></td></tr></table></figure>

<h3 id="3-3-2-在用户的映射配置文件中配置"><a href="#3-3-2-在用户的映射配置文件中配置" class="headerlink" title="3.3.2 在用户的映射配置文件中配置"></a><strong>3.3.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 更新用户 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;update id=*<span class="string">"updateUser"</span>* parameterType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line"></span><br><span class="line">update user set username=#&#123;username&#125;,birthday=#&#123;birthday&#125;,sex=#&#123;sex&#125;, </span><br><span class="line"></span><br><span class="line">address=#&#123;address&#125; where id=#&#123;id&#125; </span><br><span class="line"></span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-3-加入更新的测试方法"><a href="#3-3-3-加入更新的测试方法" class="headerlink" title="3.3.3 加入更新的测试方法"></a><strong>3.3.3</strong> <strong>加入更新的测试方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testUpdateUser()**<span class="keyword">throws</span>** Exception&#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//1.根据 id 查询 </span></span><br><span class="line"></span><br><span class="line">User user = userDao.findById(<span class="number">52</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//2.更新操作 </span></span><br><span class="line"></span><br><span class="line">user.setAddress(<span class="string">"北京市顺义区"</span>); </span><br><span class="line"></span><br><span class="line">**<span class="keyword">int</span>** res = userDao.updateUser(user); </span><br><span class="line"></span><br><span class="line">System.***out***.println(res); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-4-用户删除"><a href="#3-4-用户删除" class="headerlink" title="3.4 用户删除"></a><strong>3.4</strong> <strong>用户删除</strong></h2><h3 id="3-4-1-在持久层接口中添加删除方法"><a href="#3-4-1-在持久层接口中添加删除方法" class="headerlink" title="3.4.1 在持久层接口中添加删除方法"></a><strong>3.4.1</strong> <strong>在持久层接口中添加删除方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* 根据 id 删除用户 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@param</span>** userId </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@return</span>** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">int</span>** deleteUser(Integer userId);</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-在用户的映射配置文件中配置"><a href="#3-4-2-在用户的映射配置文件中配置" class="headerlink" title="3.4.2 在用户的映射配置文件中配置"></a><strong>3.4.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 删除用户 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;delete id=*<span class="string">"deleteUser"</span>* parameterType=*<span class="string">"java.lang.Integer"</span>*&gt; </span><br><span class="line"></span><br><span class="line">delete from user where id = #&#123;uid&#125; </span><br><span class="line"></span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-3-加入删除的测试方法"><a href="#3-4-3-加入删除的测试方法" class="headerlink" title="3.4.3 加入删除的测试方法"></a><strong>3.4.3</strong> <strong>加入删除的测试方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testDeleteUser() **<span class="keyword">throws</span>** Exception &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//6.执行操作 </span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">int</span>** res = userDao.deleteUser(<span class="number">52</span>); </span><br><span class="line"></span><br><span class="line">System.***out***.println(res); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-5-用户模糊查询"><a href="#3-5-用户模糊查询" class="headerlink" title="3.5 用户模糊查询"></a><strong>3.5</strong> <strong>用户模糊查询</strong></h2><h3 id="3-5-1-在持久层接口中添加模糊查询方法"><a href="#3-5-1-在持久层接口中添加模糊查询方法" class="headerlink" title="3.5.1 在持久层接口中添加模糊查询方法"></a><strong>3.5.1</strong> <strong>在持久层接口中添加模糊查询方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* 根据名称模糊查询 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@param</span>** username </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@return</span>** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findByName</span><span class="params">(String username)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-2-在用户的映射配置文件中配置"><a href="#3-5-2-在用户的映射配置文件中配置" class="headerlink" title="3.5.2 在用户的映射配置文件中配置"></a><strong>3.5.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 根据名称模糊查询 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;select id=*<span class="string">"findByName"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>* parameterType=*<span class="string">"String"</span>*&gt; </span><br><span class="line"></span><br><span class="line">select * from user where username like #&#123;username&#125; </span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-3-加入模糊查询的测试方法"><a href="#3-5-3-加入模糊查询的测试方法" class="headerlink" title="3.5.3 加入模糊查询的测试方法"></a><strong>3.5.3</strong> <strong>加入模糊查询的测试方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testFindByName()&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.执行查询一个方法 </span></span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = userDao.findByName(<span class="string">"%王%"</span>); </span><br><span class="line"></span><br><span class="line">**<span class="keyword">for</span>**(User user : users)&#123; </span><br><span class="line"></span><br><span class="line">System.***out***.println(user); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在控制台输出的执行 SQL 语句如下： </p>
<p>​    我们在配置文件中没有加入%来作为模糊查询的条件，所以在传入字符串实参时，就需要给定模糊查询的标 </p>
<p>识%。配置文件中的#{username}也只是一个占位符，所以 SQL 语句显示为“？”。 </p>
<h3 id="3-5-4-模糊查询的另一种配置方式"><a href="#3-5-4-模糊查询的另一种配置方式" class="headerlink" title="3.5.4 模糊查询的另一种配置方式"></a><strong>3.5.4</strong> <strong>模糊查询的另一种配置方式</strong></h3><p>第一步：修改 SQL 语句的配置，配置如下： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 根据名称模糊查询 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;select id=*<span class="string">"findByName"</span>* parameterType=*<span class="string">"string"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line"></span><br><span class="line">select * from user where username like <span class="string">'%$&#123;value&#125;%'</span> </span><br><span class="line"></span><br><span class="line">&lt;/select&gt; </span><br><span class="line"></span><br><span class="line">我们在上面将原来的#&#123;&#125;占位符，改成了$&#123;value&#125;。注意如果用模糊查询的这种写法，那么$&#123;value&#125;的写 </span><br><span class="line"></span><br><span class="line">法就是固定的，不能写成其它名字。 </span><br><span class="line"></span><br><span class="line">第二步：测试，如下： </span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* 测试模糊查询操作 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testFindByName()&#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//5.执行查询一个方法 </span></span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = userDao.findByName(<span class="string">"王"</span>); </span><br><span class="line"></span><br><span class="line">**<span class="keyword">for</span>**(User user : users)&#123; </span><br><span class="line"></span><br><span class="line">System.***out***.println(user); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-5-与-的区别"><a href="#3-5-5-与-的区别" class="headerlink" title="3.5.5 #{}与${}的区别"></a><strong>3.5.5 #{}与${}的区别</strong></h3><p><strong>#{}</strong>表示一个占位符号</p>
<p>通过#{}可以实现 preparedStatement 向占位符中设置值，自动进行 java 类型和 jdbc 类型转换， </p>
<p>#{}可以有效防止 sql 注入。 #{}可以接收简单类型值或 pojo 属性值。 如果 parameterType 传输单个简单类 </p>
<p>型值，#{}括号中可以是 value 或其它名称。 </p>
<p><strong>${}</strong>表示拼接sql串</p>
<p>通过${}可以将 parameterType 传入的内容拼接在 sql 中且不进行 jdbc 类型转换， ${}可以接收简 </p>
<p>单类型值或 pojo 属性值，如果 parameterType 传输单个简单类型值，${}括号中只能是 value。 </p>
<h2 id="3-6-查询使用聚合函数"><a href="#3-6-查询使用聚合函数" class="headerlink" title="3.6 查询使用聚合函数"></a><strong>3.6</strong> <strong>查询使用聚合函数</strong></h2><h3 id="3-6-1-在持久层接口中添加模糊查询方法"><a href="#3-6-1-在持久层接口中添加模糊查询方法" class="headerlink" title="3.6.1 在持久层接口中添加模糊查询方法"></a><strong>3.6.1</strong> <strong>在持久层接口中添加模糊查询方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findTotal</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-6-2-在用户的映射配置文件中配置"><a href="#3-6-2-在用户的映射配置文件中配置" class="headerlink" title="3.6.2 在用户的映射配置文件中配置"></a><strong>3.6.2</strong> <strong>在用户的映射配置文件中配置</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 查询总记录条数 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;select id=*<span class="string">"findTotal"</span>* resultType=*<span class="string">"int"</span>*&gt; </span><br><span class="line"></span><br><span class="line"><span class="function">select <span class="title">count</span><span class="params">(*)</span> from user</span>;</span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-6-3-加入聚合查询的测试方法"><a href="#3-6-3-加入聚合查询的测试方法" class="headerlink" title="3.6.3 加入聚合查询的测试方法"></a><strong>3.6.3</strong> <strong>加入聚合查询的测试方法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line">**<span class="keyword">public</span> <span class="keyword">void</span>** testFindTotal() **<span class="keyword">throws</span>** Exception &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//6.执行操作 </span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">int</span>** res = userDao.findTotal(); </span><br><span class="line"></span><br><span class="line">System.***out***.println(res); </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-Mybatis-与-JDBC-编程的比较"><a href="#3-7-Mybatis-与-JDBC-编程的比较" class="headerlink" title="3.7 Mybatis 与 JDBC 编程的比较"></a><strong>3.7 Mybatis</strong> <strong>与</strong> <strong>JDBC</strong> <strong>编程的比较</strong></h3><ol>
<li>数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库链接池可解决此问题。 </li>
</ol>
<p><strong>解决</strong>： 在 SqlMapConfig.xml 中配置数据链接池，使用连接池管理数据库链接。 </p>
<ol start="2">
<li>Sql 语句写在代码中造成代码不易维护，实际应用 sql 变化的可能较大，sql 变动需要改变 java 代码。 </li>
</ol>
<p><strong>解决</strong>： 将 Sql 语句配置在 XXXXmapper.xml 文件中与 java 代码分离。 </p>
<ol start="3">
<li>向 sql 语句传参数麻烦，因为 sql 语句的 where 条件不一定，可能多也可能少，占位符需要和参数对应。 </li>
</ol>
<p><strong>解决</strong>： Mybatis 自动将 java 对象映射至 sql 语句，通过 statement 中的 parameterType 定义输入参数的 </p>
<p>类型。 </p>
<ol start="4">
<li>对结果集解析麻烦，sql 变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成 pojo 对 </li>
</ol>
<p>象解析比较方便。 </p>
<p><strong>解决</strong>： Mybatis 自动将 sql 执行结果映射至 java 对象，通过 statement 中的 resultType 定义输出结果的 </p>
<p>类型。 </p>
<h1 id="4-Mybatis-的输出结果封装"><a href="#4-Mybatis-的输出结果封装" class="headerlink" title="4 Mybatis 的输出结果封装"></a>4 <strong>Mybatis</strong> <strong>的输出结果封装</strong></h1><h2 id="4-1-resultType-配置结果类型"><a href="#4-1-resultType-配置结果类型" class="headerlink" title="4.1 resultType 配置结果类型"></a><strong>4.1 resultType</strong> <strong>配置结果类型</strong></h2><ol>
<li><p>resultType 属性可以指定结果集的类型，它支持基本类型和实体类类型。 </p>
</li>
<li><p>需要注意的是，它和 parameterType 一样，如果注册过类型别名的，可以直接使用别名。没有注册过的必须 </p>
</li>
</ol>
<p>使用全限定类名。</p>
<h3 id="4-1-1-基本类型示例"><a href="#4-1-1-基本类型示例" class="headerlink" title="4.1.1 基本类型示例"></a><strong>4.1.1</strong> <strong>基本类型示例</strong></h3><h4 id="4-1-1-1-Dao-接口"><a href="#4-1-1-1-Dao-接口" class="headerlink" title="4.1.1.1 Dao 接口"></a><strong>4.1.1.1 Dao</strong> <strong>接口</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findTotal</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-1-2-映射配置"><a href="#4-1-1-2-映射配置" class="headerlink" title="4.1.1.2 映射配置"></a><strong>4.1.1.2</strong> <strong>映射配置</strong></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=*<span class="string">"findTotal"</span>* resultType=*<span class="string">"int"</span>*&gt; </span><br><span class="line"></span><br><span class="line">	<span class="function">select <span class="title">count</span><span class="params">(*)</span> from user</span>; </span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-2-实体类类型示例"><a href="#4-1-2-实体类类型示例" class="headerlink" title="4.1.2 实体类类型示例"></a><strong>4.1.2</strong> <strong>实体类类型示例</strong></h3><h4 id="4-1-2-1-Dao-接口"><a href="#4-1-2-1-Dao-接口" class="headerlink" title="4.1.2.1 Dao 接口"></a><strong>4.1.2.1 Dao</strong> <strong>接口</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* 查询所有用户 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">\* **<span class="doctag">@return</span>** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-2-映射配置"><a href="#4-1-2-2-映射配置" class="headerlink" title="4.1.2.2 映射配置"></a><strong>4.1.2.2</strong> <strong>映射配置</strong></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=*<span class="string">"findAll"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line"></span><br><span class="line">	select * from user </span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-特殊情况示例"><a href="#4-1-3-特殊情况示例" class="headerlink" title="4.1.3 特殊情况示例"></a><strong>4.1.3</strong> <strong>特殊情况示例</strong></h3><h4 id="4-1-3-1-修改实体类"><a href="#4-1-3-1-修改实体类" class="headerlink" title="4.1.3.1 修改实体类"></a><strong>4.1.3.1</strong> <strong>修改实体类</strong></h4><p>实体类代码如下：<strong>(此时的实体类属性和数据库表的列名已经不一致了)</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer userId; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String userName; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Date userBirthday; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String userSex; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String userAddress; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getUserId</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> userId; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserId</span><span class="params">(Integer userId)</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.userId = userId; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> userName; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.userName = userName; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getUserBirthday</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> userBirthday; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserBirthday</span><span class="params">(Date userBirthday)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.userBirthday = userBirthday; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserSex</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> userSex; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserSex</span><span class="params">(String userSex)</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.userSex = userSex; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserAddress</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> userAddress; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserAddress</span><span class="params">(String userAddress)</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.userAddress = userAddress; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="string">"User [userId="</span> + userId + <span class="string">", userName="</span> + userName + <span class="string">", userBirthday="</span> </span><br><span class="line"></span><br><span class="line">\+ userBirthday + <span class="string">", userSex="</span> </span><br><span class="line"></span><br><span class="line">\+ userSex + <span class="string">", userAddress="</span> + userAddress + <span class="string">"]"</span>; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-3-2-Dao-接口"><a href="#4-1-3-2-Dao-接口" class="headerlink" title="4.1.3.2 Dao 接口"></a><strong>4.1.3.2 Dao</strong> <strong>接口</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-3-3-映射配置"><a href="#4-1-3-3-映射配置" class="headerlink" title="4.1.3.3 映射配置"></a>4.1.3.3 <strong>映射配置</strong></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=*<span class="string">"findAll"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line">	select * from user </span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-3-4-修改映射配置"><a href="#4-1-3-4-修改映射配置" class="headerlink" title="4.1.3.4 修改映射配置"></a><strong>4.1.3.4</strong> <strong>修改映射配置</strong></h4><p><strong>使用别名查询</strong> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=*<span class="string">"findAll"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>*&gt; </span><br><span class="line">select id as userId,username as userName,birthday as userBirthday, </span><br><span class="line"></span><br><span class="line">sex as userSex,address as userAddress from user </span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>如果我们的查询很多，都使用别名的话写起来岂不是很麻烦?</p>
<h2 id="4-2-resultMap-结果类型"><a href="#4-2-resultMap-结果类型" class="headerlink" title="4.2 resultMap 结果类型"></a><strong>4.2 resultMap</strong> <strong>结果类型</strong></h2><p>​    resultMap 标签可以建立查询的列名和实体类的属性名称不一致时建立对应关系。从而实现封装。 </p>
<p>在 select 标签中使用 resultMap 属性指定引用即可。同时 resultMap 可以实现将查询结果映射为复杂类 </p>
<p>型的 pojo，比如在查询结果映射对象中包括 pojo 和 list 实现一对一查询和一对多查询。 </p>
<h3 id="4-2-1-定义-resultMap"><a href="#4-2-1-定义-resultMap" class="headerlink" title="4.2.1 定义 resultMap"></a><strong>4.2.1</strong> <strong>定义</strong> <strong>resultMap</strong></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 建立 User 实体和数据库表的对应关系</span><br><span class="line"></span><br><span class="line">type 属性：指定实体类的全限定类名 </span><br><span class="line"></span><br><span class="line">id 属性：给定一个唯一标识，是给查询 select 标签引用用的。 </span><br><span class="line"></span><br><span class="line">--&gt; </span><br><span class="line"></span><br><span class="line">&lt;resultMap type=*<span class="string">"com.itheima.domain.User"</span>* id=*<span class="string">"userMap"</span>*&gt; </span><br><span class="line"></span><br><span class="line">&lt;id column=*<span class="string">"id"</span>* property=*<span class="string">"userId"</span>*/&gt; </span><br><span class="line"></span><br><span class="line">&lt;result column=*<span class="string">"username"</span>* property=*<span class="string">"userName"</span>*/&gt; </span><br><span class="line"></span><br><span class="line">&lt;result column=*<span class="string">"sex"</span>* property=*<span class="string">"userSex"</span>*/&gt; </span><br><span class="line"></span><br><span class="line">&lt;result column=*<span class="string">"address"</span>* property=*<span class="string">"userAddress"</span>*/&gt; </span><br><span class="line"></span><br><span class="line">&lt;result column=*<span class="string">"birthday"</span>* property=*<span class="string">"userBirthday"</span>*/&gt; </span><br><span class="line"></span><br><span class="line">&lt;/resultMap&gt;</span><br></pre></td></tr></table></figure>

<p>id 标签：用于指定主键字段 </p>
<p>result 标签：用于指定非主键字段 </p>
<p>column 属性：用于指定数据库列名 </p>
<p>property 属性：用于指定实体类属性名称 </p>
<h1 id="5-Mybatis-的参数深入"><a href="#5-Mybatis-的参数深入" class="headerlink" title="5 Mybatis 的参数深入"></a><strong>5 Mybatis 的参数深入</strong></h1><h2 id="5-1-parameterType-配置参数"><a href="#5-1-parameterType-配置参数" class="headerlink" title="5.1 parameterType 配置参数"></a><strong>5.1 parameterType</strong> <strong>配置参数</strong></h2><h3 id="5-1-1-注意事项"><a href="#5-1-1-注意事项" class="headerlink" title="5.1.1 注意事项"></a><strong>5.1.1</strong> <strong>注意事项</strong></h3><ol>
<li>基 本 类 型 和 String 我 们 可 以 直 接 写 类 型 名 称 ， 也 可 以 使 用 包 名 . 类 名 的 方 式 ， 例 如 ： </li>
</ol>
<p>java.lang.String。 </p>
<ol start="2">
<li><p>实体类类型，目前我们只能使用全限定类名。 </p>
<p>究其原因，是 mybaits 在加载时已经把常用的数据类型注册了别名，从而我们在使用时可以不写包名， </p>
</li>
</ol>
<p>而我们的是实体类并没有注册别名，所以必须写全限定类名。在今天课程的最后一个章节中将讲解如何注册实体类 </p>
<p>的别名。 </p>
<h2 id="5-2-传递-pojo-包装对象"><a href="#5-2-传递-pojo-包装对象" class="headerlink" title="5.2 传递 pojo 包装对象"></a><strong>5.2</strong> <strong>传递</strong> <strong>pojo</strong> <strong>包装对象</strong></h2><p>​    开发中通过 pojo 传递查询条件 ，查询条件是综合的查询条件，不仅包括用户查询条件还包括其它的查 </p>
<p>询条件（比如将用户购买商品信息也作为查询条件），这时可以使用包装对象传递输入参数。 Pojo 类中包含 pojo。 </p>
<p>需求：根据用户名查询用户信息，查询条件放到 QueryVo 的 user 属性中。 </p>
<h3 id="5-2-1-编写-QueryVo"><a href="#5-2-1-编写-QueryVo" class="headerlink" title="5.2.1 编写 QueryVo"></a><strong>5.2.1</strong> <strong>编写</strong> <strong>QueryVo</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryVo</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> User user; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> user; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.user = user; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-2-编写持久层接口"><a href="#5-2-2-编写持久层接口" class="headerlink" title="5.2.2 编写持久层接口"></a><strong>5.2.2</strong> <strong>编写持久层接口</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123; </span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findByVo</span><span class="params">(QueryVo vo)</span></span>; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-3-持久层接口的映射文件"><a href="#5-2-3-持久层接口的映射文件" class="headerlink" title="5.2.3 持久层接口的映射文件"></a><strong>5.2.3</strong> <strong>持久层接口的映射文件</strong></h3><!-- 根据用户名称模糊查询，参数变成一个 QueryVo 对象了 --> 

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=*<span class="string">"findByVo"</span>* resultType=*<span class="string">"com.itheima.domain.User"</span>  parameterType=*<span class="string">"com.itheima.domain.QueryVo"</span>*&gt; </span><br><span class="line"></span><br><span class="line">select * from user where username like #&#123;user.username&#125;; </span><br><span class="line"></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-4-测试包装类作为参数"><a href="#5-2-4-测试包装类作为参数" class="headerlink" title="5.2.4 测试包装类作为参数"></a><strong>5.2.4</strong> <strong>测试包装类作为参数</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByQueryVo</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">QueryVo vo = <span class="keyword">new</span> QueryVo(); </span><br><span class="line"></span><br><span class="line">User user = <span class="keyword">new</span> User(); </span><br><span class="line"></span><br><span class="line">user.setUserName(<span class="string">"%王%"</span>); </span><br><span class="line"></span><br><span class="line">vo.setUser(user); </span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = userDao.findByVo(vo); </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(User u : users) &#123; </span><br><span class="line"></span><br><span class="line">System.*out*.println(u); </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        
      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/08/26/Linux入门基础 学习/" rel="next" title="Linux入门基础学习">
                  <i class="fa fa-chevron-left"></i> Linux入门基础学习
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/08/26/mybatis框架学习（二）/" rel="prev" title="mybatis框架学习（二）">
                  mybatis框架学习（二） <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          文章目录
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-MyBatis简介"><span class="nav-number">1.</span> <span class="nav-text">1 MyBatis简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-MyBatis"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 MyBatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-jdbc程序代码"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 jdbc程序代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Mybatis-框架快速入门"><span class="nav-number">2.</span> <span class="nav-text">2 Mybatis 框架快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Mybatis-框架开发的准备"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 Mybatis 框架开发的准备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-官网下载-Mybatis-框架"><span class="nav-number">2.1.1.</span> <span class="nav-text">2.1.1 官网下载 Mybatis 框架</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-搭建-Mybatis-开发环境"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 搭建 Mybatis 开发环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1创建maven工程"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1创建maven工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2添加Mybatis-的坐标"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2添加Mybatis 的坐标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-编写-User-实体类"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.3 编写 User 实体类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-编写持久层接口-IUserDao"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.2.4 编写持久层接口 IUserDao</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5-编写持久层接口的映射文件-IUserDao-xml"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.2.5 编写持久层接口的映射文件 IUserDao.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-6-编写-SqlMapConfig-xml-配置文件"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.2.6 编写 SqlMapConfig.xml 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-7-编写测试类"><span class="nav-number">2.2.7.</span> <span class="nav-text">2.2.7 编写测试类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-小结"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 小结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-基于代理-Dao-实现-CRUD-操作"><span class="nav-number">3.</span> <span class="nav-text">3 基于代理 Dao 实现 CRUD 操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-根据-ID-查询"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 根据 ID 查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-在持久层接口中添加-findById-方法"><span class="nav-number">3.1.1.</span> <span class="nav-text">3.1.1 在持久层接口中添加 findById 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-在用户的映射配置文件中配置"><span class="nav-number">3.1.2.</span> <span class="nav-text">3.1.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-在测试类添加测试"><span class="nav-number">3.1.3.</span> <span class="nav-text">3.1.3 在测试类添加测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-保存操作"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 保存操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-在持久层接口中添加新增方法"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 在持久层接口中添加新增方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-在用户的映射配置文件中配置"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3-添加测试类中的测试方法"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 添加测试类中的测试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-4-问题扩展：新增用户-id-的返回值"><span class="nav-number">3.2.4.</span> <span class="nav-text">3.2.4 问题扩展：新增用户 id 的返回值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-用户更新"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 用户更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-在持久层接口中添加更新方法"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 在持久层接口中添加更新方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2-在用户的映射配置文件中配置"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-3-加入更新的测试方法"><span class="nav-number">3.3.3.</span> <span class="nav-text">3.3.3 加入更新的测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-用户删除"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 用户删除</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-在持久层接口中添加删除方法"><span class="nav-number">3.4.1.</span> <span class="nav-text">3.4.1 在持久层接口中添加删除方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-在用户的映射配置文件中配置"><span class="nav-number">3.4.2.</span> <span class="nav-text">3.4.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-3-加入删除的测试方法"><span class="nav-number">3.4.3.</span> <span class="nav-text">3.4.3 加入删除的测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-用户模糊查询"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 用户模糊查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-1-在持久层接口中添加模糊查询方法"><span class="nav-number">3.5.1.</span> <span class="nav-text">3.5.1 在持久层接口中添加模糊查询方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-2-在用户的映射配置文件中配置"><span class="nav-number">3.5.2.</span> <span class="nav-text">3.5.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-3-加入模糊查询的测试方法"><span class="nav-number">3.5.3.</span> <span class="nav-text">3.5.3 加入模糊查询的测试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-4-模糊查询的另一种配置方式"><span class="nav-number">3.5.4.</span> <span class="nav-text">3.5.4 模糊查询的另一种配置方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-5-与-的区别"><span class="nav-number">3.5.5.</span> <span class="nav-text">3.5.5 #{}与${}的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-查询使用聚合函数"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 查询使用聚合函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-1-在持久层接口中添加模糊查询方法"><span class="nav-number">3.6.1.</span> <span class="nav-text">3.6.1 在持久层接口中添加模糊查询方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-2-在用户的映射配置文件中配置"><span class="nav-number">3.6.2.</span> <span class="nav-text">3.6.2 在用户的映射配置文件中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-3-加入聚合查询的测试方法"><span class="nav-number">3.6.3.</span> <span class="nav-text">3.6.3 加入聚合查询的测试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-Mybatis-与-JDBC-编程的比较"><span class="nav-number">3.6.4.</span> <span class="nav-text">3.7 Mybatis 与 JDBC 编程的比较</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Mybatis-的输出结果封装"><span class="nav-number">4.</span> <span class="nav-text">4 Mybatis 的输出结果封装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-resultType-配置结果类型"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 resultType 配置结果类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-基本类型示例"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 基本类型示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-1-Dao-接口"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">4.1.1.1 Dao 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-2-映射配置"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">4.1.1.2 映射配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-实体类类型示例"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 实体类类型示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-1-Dao-接口"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">4.1.2.1 Dao 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-2-映射配置"><span class="nav-number">4.1.2.2.</span> <span class="nav-text">4.1.2.2 映射配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-特殊情况示例"><span class="nav-number">4.1.3.</span> <span class="nav-text">4.1.3 特殊情况示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-1-修改实体类"><span class="nav-number">4.1.3.1.</span> <span class="nav-text">4.1.3.1 修改实体类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-2-Dao-接口"><span class="nav-number">4.1.3.2.</span> <span class="nav-text">4.1.3.2 Dao 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-3-映射配置"><span class="nav-number">4.1.3.3.</span> <span class="nav-text">4.1.3.3 映射配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-4-修改映射配置"><span class="nav-number">4.1.3.4.</span> <span class="nav-text">4.1.3.4 修改映射配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-resultMap-结果类型"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 resultMap 结果类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-定义-resultMap"><span class="nav-number">4.2.1.</span> <span class="nav-text">4.2.1 定义 resultMap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Mybatis-的参数深入"><span class="nav-number">5.</span> <span class="nav-text">5 Mybatis 的参数深入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-parameterType-配置参数"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 parameterType 配置参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-1-注意事项"><span class="nav-number">5.1.1.</span> <span class="nav-text">5.1.1 注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-传递-pojo-包装对象"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 传递 pojo 包装对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-1-编写-QueryVo"><span class="nav-number">5.2.1.</span> <span class="nav-text">5.2.1 编写 QueryVo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-2-编写持久层接口"><span class="nav-number">5.2.2.</span> <span class="nav-text">5.2.2 编写持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-3-持久层接口的映射文件"><span class="nav-number">5.2.3.</span> <span class="nav-text">5.2.3 持久层接口的映射文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-4-测试包装类作为参数"><span class="nav-number">5.2.4.</span> <span class="nav-text">5.2.4 测试包装类作为参数</span></a></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/nezha.jpg"
      alt="吒儿">
  <p class="site-author-name" itemprop="name">吒儿</p>
  <div class="site-description" itemprop="description">去他个鸟命!我命由我,不由天!是魔是仙,我自己决定!</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span>
        
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吒儿</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.3.0</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/pisces.js?v=7.3.0"></script>

<script src="/js/next-boot.js?v=7.3.0"></script>



  





















  

  

  

</body>
</html>
